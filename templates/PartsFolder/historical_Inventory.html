{%extends 'mgmt/index.html'%}
{% load static%}
{% block content %}
{% load widget_tweaks %}
{%include 'mgmt/status.html'%}

<head>
    <link rel="stylesheet" type="text/css" href="{% static 'css/home.css'%}">
    <style>
        .container-fluid{
            
            padding-left: 200px;
            padding-right: 200px;
        }

        .a{
            color:black;
        }
       
        .export:hover{
        transform: scale(1.05);
            }

        .container{   
            
            
        } 
        .circleme{
            border-radius: 15px;
            border: 1px solid;
        }
        .reciever{
            background:  #afb4b97c ;  
        }
    
        .btn-dre{
            border-radius:30px;
            font-size:18px;
            width:100%;
            padding: 10px;
            border-radius: 15px;
          
            float: right;
            transition: all .2s ease-in-out; 
        }
        .btn-dre:hover{
            transform: scale(1.1);
        }

        .sb-btn{
            border-radius: 15px;
          
            float: right;
            transition: all .2s ease-in-out; 
        }
        .sb-btn:hover{
            transform: scale(1.1);
        }

        .export-layout{
            display:flex;
            margin: 0 auto;
            padding-bottom:20px;
        }

        .sb-export{
            border-radius: 15px;
            background: linear-gradient(135deg, #4fb945 0%, #10d13a60 100%);
            float: right;
            transition: all .2s ease-in-out; 
            font-size: 20px;
            width: 200px;
        }
        .sb-export:hover{
            transform: scale(1.1);
        }


        .btn-comp{
            border-radius: 15px;
            background:linear-gradient(135deg, #ce961c 0%, #ca1616 100%);
            float: right;
            transition: all .2s ease-in-out; 
        }

        .btn-comp:hover{
            transform: scale(1.1);
        }
    
           
    </style>
</head>

<body>
    <br>
    <br>

    <div class="container-fluid">        
        <div class="row">
            <div class="mx-auto" style="width: 800px;">
                <div class="center-heading">
                    <h2 class="section-title"> HISTORICAL INVENTORY </h2>
                </div>
            </div>
            <div class="offset-lg-3 col-lg-6">
                <div class="center-text">
                    <p style="text-align:center">Search for all historical compoments which have been exhausted through the process of assigning them to work-orders.</p>                  
                </div>
            </div>
        </div>
    
      <br>
       
    </div>

    <div class="container-fluid">
       
        <div class="row"> 
            <div class="col-md-10">
            <div class= 'card card-body circleme '>
                <form method="get">
                   {{partfilter.form}} 
                <button class="btn btn-primary sb-btn" type="submit">Search </button> 
              </form>
            </div>
            </div>

            <div class="col-md-2">
                <div class= 'card card-body circleme '>
                    <div style="width: 100%; overflow: hidden;">
                        <div class = "export" style="margin-left: 50px;"> <a href="#"><img src="https://img.icons8.com/color/58/000000/microsoft-excel-2019--v1.png"/></a> </div>                        
                    </div>                                  
                </div>                
            </div>
        </div>  

        <br>

        <div class="row">  
            <div class="col-md-12">
                <div class="card card-body circleme">
                    <table class="table table-max table-md">
                        <tr>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Description</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Part-Type</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">P/N</th>                        
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">S#/B#</th>                         
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">SRN</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Inspector</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Cert Documents</th>

                            
                            
                           
                        </tr>
                        {% for instance in queryset %}
                        <tr>
                        
                            <td style="text-align:center; ">{{instance.description}}</td>
                            <td style="text-align:center; ">{{instance.part_type}}</td>

                            <td style=" text-align:center;">{{instance.part_number}}</td>
                            {%if instance.serial_number%}
                            <td style="text-align:center;">{{instance.serial_number}}</td>
                            {%else%}
                            <td style="text-align:center;">{{instance.batch_no}}</td>
                            {%endif%}
                            
                            <td style="text-align:center;" >{{instance.SRN}}</td>
                            <td style="text-align:center;" >{{instance.inspector}}</td>
                            
                            {% if instance.cert_document %}
                               <td style="text-align:center;"><a href="{{instance.cert_document.url}}" target="_blank""><img src="https://img.icons8.com/ios/30/000000/paper.png"/></a> </td>
                            {%else%}
                            <td style="text-align:center;"><img src="https://img.icons8.com/offices/30/000000/cancel-2.png"/> </td>
                            {% endif %}
                            
                            <td style="text-align:center"><a id='about-btn' class="btn btn-sm btn-danger sb-btn" onClick='' href="#">Delete</a></td>
                            <td style="text-align:center"><a class="btn btn-sm btn-info sb-btn" href="{%url 'historialWO' instance.id%}">Part History</a></td>
                            <!-- <td style="text-align:center"><a class="btn btn-sm btn-warning sb-btn" href="#">Reason</a></td> -->
                            
                     

                            
                            
                  
                        </tr>
                        {% endfor%}
        
                    </table>
                </div>
        </div>           
        </div >
        <br>
        <br>
        <hr>
    </div>
    <br>
    <br>

   
    

    <!-- Work-Order -->

    <div class="container-fluid">        
        <div class="row">
            <div class="mx-auto" style="width: 800px;">
                <div class="center-heading">
                    <h2 class="section-title"> HISTORICAL WORK-ORDERS </h2>
                </div>
            </div>
            <div class="offset-lg-3 col-lg-6">
                <div class="center-text">
                    <p style="text-align:center">Search for all historical work-orders and there corresponding parts.</p>                  
                </div>
            </div>
        </div>
    
      <br>
       
    </div>

    <div class="container-fluid">
       
        <div class="row"> 
            <div class="col-md-10">
            <div class= 'card card-body circleme '>
                <form method="get">
                   {{workOrderFilter.form}} 
                <button class="btn btn-primary sb-btn" type="submit">Search </button> 
              </form>
            </div>
            </div>

            <div class="col-md-2">
                <div class= 'card card-body circleme '>
                    <div style="width: 100%; overflow: hidden;">
                        <div class = "export" style="margin-left: 50px;"> <a href="#"><img src="https://img.icons8.com/color/58/000000/microsoft-excel-2019--v1.png"/></a> </div>                        
                    </div>                                  
                </div>                
            </div>
        </div>  

        <br>

        <div class="row">  
            <div class="col-md-12">
                <div class="card card-body circleme">
                    <table class="table table-med table-md">
                        <tr>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Work Order No</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Tail No</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Airframe Type</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">LDGS @Close</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Date Open</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Date Closed</th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);">Duration</th>
                            
                   
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);"></th>
                            <th style="text-align:center; background-color:rgba(128, 128, 128, 0.644);"></th>
                            
                        </tr>
                        {% for instance in querysetclosed %}
                        <tr>
                            <td style="text-align:center">{{instance.workorder_number}}</td>
                            <td style="text-align:center">{{instance.tail_number}}</td>
                            <td style="text-align:center">{{instance.type_airframe}}</td>
                            <td style="text-align:center">{{instance.ldgs_at_open}}</td>
                            <td style="text-align:center">{{instance.date_added|date:"M d, Y"}}</td>
                            <td style="text-align:center">{{instance.date_closed|date:"M d, Y"}}</td>
                            <td style="text-align:center"><strong>{{instance.duration}}</strong></td>
                            
                            
        
                            <td><a class="btn btn-sm btn-info sb-btn" href="{%url 'partslink' instance.id 'Historical'%}">View</a></td>
                            <td><a class="btn btn-sm btn-success sb-btn" href="{%url 'exportPDFWorkorder' instance.id %}">Print PDF</a></td>
                            
                        </tr>
                        {% endfor%}
        
                    </table>
                </div>
        </div>           
        </div >
    </div>
   
    <br>
    <br> 
  

      
</body>


  
	

{% endblock%}
